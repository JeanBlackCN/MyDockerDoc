测试优化
===

部署在 74.35～37网段汇道1.2网关进行了压力测试，主要组件为(都是单节点）：鉴权中心，clientgateway 和 apigateway。

## 测试准备

* 主要流程：传入apiid和token两个参数，调用clientgateway调用鉴权中心，进行鉴权，鉴权成功后，转发给apigateway通过apiid对应API的详细调用信息
* 并发线程数：1000个
* 时长：1分18秒


## 测试结果

* 总共运行的线程数：26845
* 平均响应时间：2602ms
* 中位数响应时间：2651ms 
* 90%的线程响应时间小于：2963ms
* 95%的线程响应时间小于：4781ms
* 99%的线程响应时间小于：10671ms
* 最小响应时间小于：13ms
* 最大响应时间小于：13999ms
* 错误率：0%
* 吞吐量：342.1/s
* 吞吐数据：124.9kb/s


## 测试出现的问题

1. 当鉴权中心与redis部署在同一台机子上时，只压测鉴权鉴权token的接口，一段时间大并发数据量访问后，会报鉴权中心连接redies的connection refused的错误。
	
		原因暂未找到，解决办法：将鉴权中心与redis部署在不同的机子上面



